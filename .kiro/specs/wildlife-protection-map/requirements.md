# 要件定義書

## 概要

三重県の鳥獣保護区情報をGoogleマップ上にオーバーレイ表示するWebアプリケーション。ユーザーはPDFで提供される保護区地図をアップロードし、基準点を設定してGoogleマップと位置合わせを行い、透明度調整や設定保存が可能。

## 用語集

- **鳥獣保護区マップアプリ**: 鳥獣保護区情報を地図上に表示するWebアプリケーション
- **PDFオーバーレイ**: PDFをGoogleマップ上に重ね合わせて表示する機能
- **基準点**: PDF上とGoogleマップ上の対応する座標点
- **Ground Overlay**: GoogleマップのGroundOverlay API機能
- **ローカルストレージ**: ブラウザのローカルストレージ
- **座標合わせ**: 座標の位置合わせ処理

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、鳥獣保護区のPDF地図をアップロードして、Googleマップ上にオーバーレイ表示したい

#### 受け入れ基準

1. ユーザーがPDFファイルを選択したとき、鳥獣保護区マップアプリはファイルアップロードインターフェースを表示する
2. PDFファイルがアップロードされたとき、鳥獣保護区マップアプリは大きな表示領域でPDFコンテンツを表示する
3. 鳥獣保護区マップアプリは大きなサイズのPDFファイルを適切な表示スケールでサポートする
4. PDFアップロードが失敗したとき、鳥獣保護区マップアプリはユーザーにエラーメッセージを表示する

### 要件2

**ユーザーストーリー:** ユーザーとして、PDF上とGoogleマップ上の両方で基準点を設定して、座標を正確に合わせたい

#### 受け入れ基準

1. ユーザーがPDF表示をクリックしたとき、鳥獣保護区マップアプリは選択された座標を取得して保存する
2. ユーザーがGoogleマップをクリックしたとき、鳥獣保護区マップアプリは緯度経度座標を取得する
3. 鳥獣保護区マップアプリはユーザーが正確に3組の基準点ペアを設定できるようにする
4. 3つの基準点ペアがすべて設定されたとき、鳥獣保護区マップアプリはオーバーレイ作成機能を有効にする
5. 鳥獣保護区マップアプリはPDFとマップの両方で選択された基準点の視覚的インジケーターを表示する

### 要件3

**ユーザーストーリー:** ユーザーとして、Ground OverlayまたはImageMapTypeを使用してPDFをGoogleマップにオーバーレイして、実際の地図上で保護区域を視覚化したい

#### 受け入れ基準

1. 3つの基準点が設定されたとき、鳥獣保護区マップアプリはオーバーレイ配置のための変換マトリックスを計算する
2. 鳥獣保護区マップアプリはGround OverlayまたはImageMapType APIを使用してPDFをGoogleマップ上のオーバーレイとして表示する
3. 鳥獣保護区マップアプリはオーバーレイ中に元のPDFのアスペクト比とスケールを維持する
4. オーバーレイが作成されたとき、鳥獣保護区マップアプリはそれをGoogleマップインターフェース上で表示する

### 要件4

**ユーザーストーリー:** ユーザーとして、オーバーレイの位置と透明度を微調整して、最適な視覚化を実現したい

#### 受け入れ基準

1. 鳥獣保護区マップアプリは緯度経度調整のための入力フィールドを提供する
2. 鳥獣保護区マップアプリは透明度スライダーまたは入力フィールドを提供する
3. ユーザーが座標を調整したとき、鳥獣保護区マップアプリはオーバーレイ位置をリアルタイムで更新する
4. ユーザーが透明度を調整したとき、鳥獣保護区マップアプリはオーバーレイの不透明度を即座に更新する
5. 鳥獣保護区マップアプリは合理的な地理的境界内で座標入力値を検証する

### 要件5

**ユーザーストーリー:** ユーザーとして、オーバーレイ設定をローカルストレージに保存して、将来のセッションで再利用したい

#### 受け入れ基準

1. ユーザーがオーバーレイ設定を完了したとき、鳥獣保護区マップアプリはすべての設定をローカルストレージに保存する
2. 鳥獣保護区マップアプリは基準点、座標調整、透明度設定を保存する
3. ユーザーがアプリケーションに戻ったとき、鳥獣保護区マップアプリは以前に保存された設定を読み込む
4. 鳥獣保護区マップアプリはユーザーが複数の保存されたオーバーレイ設定を作成できるようにする
5. ローカルストレージが利用できないとき、鳥獣保護区マップアプリはユーザーに警告メッセージを表示する

### 要件6

**ユーザーストーリー:** 開発者として、アプリケーションフレームワークにReactとViteを使用して、モダンで効率的なWebアプリケーションを構築したい

#### 受け入れ基準

1. 鳥獣保護区マップアプリはReactフレームワークを使用して構築される
2. 鳥獣保護区マップアプリはビルドツールと開発サーバーとしてViteを使用する
3. 鳥獣保護区マップアプリは環境変数からGoogle Maps APIキーを取得する
4. 鳥獣保護区マップアプリはReactのベストプラクティスに従った適切なコンポーネント構造を実装する
5. 鳥獣保護区マップアプリは環境変数を通じてAPIキー設定を安全に処理する